# Personal Blog
Personal Blog — это веб-сервис для создания и управления статьями. Сервис предоставляет RESTful API для выполнения CRUD-операций над статьями, такими как создание, чтение, обновление и удаление.

## Структура проекта
Проект организован в соответствии с чистой архитектурой и разделён на следующие слои:

```
-internal
 -adapters               # Инициализация и управление подключением к базе данных
 -app                    # Инициализация и запуск приложения 
 -config                 # Конфигурация приложения
 -domain                 # Модели данных
 -handlers               # Обработчики HTTP-запросов
 -repositories           # Репозитории для работы с базой данных
 -usecases               # Бизнес-логика
 -migrations             # SQL-миграции для базы данных
```

## Технологии
- **Язык программирования:** Go
- **Фреймворк:** Gin
- **База данных:** PostgreSQL
- **Контейнеризация:** Docker, Docker Compose
- **Библиотеки:**
  - `pgx` — драйвер для работы с PostgreSQL
  - `squirrel` — построитель SQL-запросов
  - `slog` — логирование
  - `uuid` — генерация уникальных идентификаторов
  - `swag` - генерация swagger
  - `golang-migrate` — управление миграциями базы данных

## Установка и запуск
### Требования
- Go (версия 1.20 или выше).
- PostgreSQL (версия 12 или выше).
- Установленный [Docker](https://docs.docker.com/get-docker/) и [Docker Compose](https://docs.docker.com/compose/install/).

### Развёртывание с помощью Docker
Следующие шаги позволят вам развернуть сервис и базу данных в контейнерах Docker.

#### 1. Клонируйте репозиторий:
```
git clone https://github.com/nikolajbotalov/articles.git
cd articles
```

#### 2. Проверьте конфигурацию:
Конфигурация для Docker задана в файле `docker-compose.yml`. Параметры подключения к базе данных и приложения уже настроены:

- Сервис доступен на `http://localhost:8080`.
- PostgreSQL работает на порту `5432` с пользователем `postgres`, паролем `admin` и базой `blog`.
Если нужно изменить настройки (например, порты или пароль), отредактируйте `docker-compose.yml`.

#### 3. Запустите приложение и базу данных:
```
docker-compose up --build
```

#### 4. Проверьте доступность:
API будет доступно по адресу: `http://localhost:8080`.

#### 5. Остановка сервисов:
Чтобы остановить контейнеры без удаления данных:
```
docker-compose down
```
Для полной очистки (включая данные в базе):
```
docker-compose down -v
```

### Локальный запуск (без Docker, опционально)

### Шаги для запуска
####  1. Настройте окружение:
Создайте файл `.env` в корне проекта и укажите параметры подключения к базе данных:
```env
BIND_IP=127.0.0.1
PORT=8080
PSQL_USERNAME=postgres
PSQL_PASSWORD=admin
PSQL_HOST=localhost
PSQL_PORT=5432
PSQL_DB=blog
```
#### 2. Установите зависимости Go:
```
go mod download
```

#### 3. Запустите приложение:
```
cd cmd/app
go run main.go
```
##### 4. Сгенерируйте Swagger-документацию (опционально)
```
swag init -g ./cmd/app/main.go -o ./docs
```

Приложение будет доступно по адресу: `http://localhost:8080`
Документация по адресу: `http://localhost:8080/swagger/index.html`

## API Endpoints
### Статьи
- **Получить все статьи:**
  - `GET /articles/all`
  - Ответ: Список статей в формате JSON.

- **Создать статью:**
  - `POST /articles/`
  - Тело запроса (JSON):
  ```json
   {
     "author": "John Doe",
     "title": "My First Article",
     "content": "This is the content of my first article."
   }
  ```
  - Ответ: Созданная статья в формате JSON.

- **Получить статью по ID:**
  - `GET /articles/:id`
  - Ответ: Статья в формате JSON.

- **Обновить статью по ID:**
  - `PUT /articles/:id`
  - Тело запроса (JSON):
  ```json
   {
     "author": "John Doe",
     "title": "My First Article",
     "content": "This is the content of my first article."
   }
  ```
  - Ответ: Обновлённая статья в формате JSON.

- **Удалить статью по ID:**
  - `DELETE /articles/:id`
  - Ответ: Сообщение об успешном удалении.

### Логирование
Логирование осуществляется с помощью библиотеки `zap`. Логи выводятся в консоль и содержат информацию о запросах, ошибках и других важных событиях.

### Тестирование
Для тестирования API можно использовать инструменты вроде Postman или curl.